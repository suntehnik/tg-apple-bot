# Руководство по разработке

Это руководство поможет вам начать разработку и вносить изменения в проект бота для отслеживания питания.

## Настройка среды разработки

1. Установите Python 3.11 или выше
2. Создайте виртуальное окружение и активируйте его:
   ```
   python -m venv venv
   source venv/bin/activate  # На Windows: venv\Scripts\activate
   ```
3. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
4. Настройте предкоммитные хуки (опционально):
   ```
   pip install pre-commit
   pre-commit install
   ```

## Соглашения о коде

### Стиль кода

- Используйте PEP 8 для форматирования кода Python
- Используйте типизацию для всех новых функций и методов
- Добавляйте документацию (docstrings) ко всем классам и методам
- Используйте осмысленные имена переменных и функций

### Структура проекта

- Следуйте существующей структуре проекта
- Размещайте новые компоненты в соответствующих директориях
- Все внешние зависимости должны быть добавлены в `requirements.txt`

## Процесс разработки

### Создание новой функциональности

1. Создайте ветку для новой функциональности:
   ```
   git checkout -b feature/название-функциональности
   ```

2. Разработайте и протестируйте функциональность

3. Убедитесь, что код соответствует стандартам:
   ```
   flake8
   mypy .
   ```

4. Создайте pull request для слияния с главной веткой

### Добавление новых сценариев

1. Создайте новую директорию в `scenarios/` для вашего сценария
2. Создайте класс сценария, наследующийся от `AbstractScenario`
3. Реализуйте методы `start()`, `next_step()` и `cancel()`
4. Добавьте сценарий в `app.py`, создав экземпляр и зарегистрировав его в оркестраторе

### Тестирование

- Пишите модульные тесты для всех новых компонентов
- Размещайте тесты в директории `tests/`
- Запускайте тесты перед созданием pull request:
  ```
  pytest
  ```

## Работа с зависимостями

### Добавление новых зависимостей

1. Установите пакет в виртуальное окружение:
   ```
   pip install package-name
   ```

2. Добавьте пакет в `requirements.txt`:
   ```
   pip freeze > requirements.txt
   ```
   
   или добавьте вручную с указанием версии:
   ```
   package-name==1.0.0
   ```

## Развертывание

### Тестирование Docker-образа

1. Соберите Docker-образ:
   ```
   docker build -t tg-food-bot:test .
   ```

2. Запустите контейнер:
   ```
   docker run --env-file .env -it tg-food-bot:test
   ```

3. Проверьте работу бота

## Предложения по улучшению

Если у вас есть предложения по улучшению проекта, создайте issue в репозитории с описанием вашей идеи.